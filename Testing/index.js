(function(o,e,l,c,d,u,t,p){"use strict";const SAUCENAO_URL="https://saucenao.com/search.php?url=%s";const {FormRow:g}=l.Forms,h=c.findByProps("Sizes","compare"),v=c.findByProps("openLazy","hideActionSheet"),{openURL:f}=c.findByProps("openURL","openDeeplink");const addReverseImageSearch=()=>{const unpatch=d.before("openLazy",v,([props,actionSheet])=>{if(actionSheet==="MessageLongPressActionSheet"){props[0].then(sheet=>{const unpatchSheet=d.after("default",sheet,(sheetProps,res)=>{e.React.useEffect(()=>()=>{unpatchSheet()},[]);try{const attachments=(sheetProps?.message?.attachments||[]).filter(file=>file.content_type&&file.content_type.startsWith("image"));if(attachments.length===0)return;const links=attachments.map((file,i)=>`> Image ${i+1}\n> ${SAUCENAO_URL.replace("%s",encodeURIComponent(file.url))}`).join("\n\n");const onPress=()=>{c.findByProps("sendBotMessage").sendBotMessage(sheetProps.message.channel_id,{content:links});v.hideActionSheet();};res.props.children.push(e.React.createElement(g,{label:"SauceNAO Reverse Image Search",leading:e.React.createElement(h,{source:u.getAssetIDByName("search")}),onPress}));}catch(err){console.error("Error adding SauceNAO option:",err);}})})}});return unpatch};var plugin={onLoad:function(){this.unpatch=addReverseImageSearch()},onUnload:function(){this.unpatch&&this.unpatch()}};return o.default=plugin,Object.defineProperty(o,"__esModule",{value:!0}),o})({},vendetta.plugin,vendetta.ui.components,vendetta.metro,vendetta.patcher,vendetta.ui.assets,vendetta.utils,vendetta.storage);
