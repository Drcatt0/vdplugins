(function(f,L,g,t,B,C,c,d,F,D,G,k,O,E){"use strict";const SAUCENAO_URL="https://saucenao.com/search.php?url=%s";const M=g.findByProps("openLazy","hideActionSheet"),P=(g.findByProps("ActionSheetRow")||d.Forms.FormRow),j=g.findByStoreName("MessageStore"),V=g.findByStoreName("ChannelStore"),z=t.stylesheet.createThemedStyleSheet({iconComponent:{width:24,height:24,tintColor:C.semanticColors.INTERACTIVE_NORMAL}});function generateSauceNAOLinks(attachments){return attachments.filter(file=>file.content_type.startsWith("image")).map((file,i)=>`> Image ${i+1}\n> ${SAUCENAO_URL.replace("%s",encodeURIComponent(file.url))}`).join("\n\n");}function K(){return B.before("openLazy",M,function(e){let[a,i,s]=e;const n=s?.message;if(i==="MessageLongPressActionSheet"&&n){a.then(function(ActionSheet){const unpatch=B.after("default",ActionSheet,function(props,res){t.React.useEffect(()=>()=>unpatch,[]);const attachments=n.attachments||[];if(attachments.length===0)return;const v=Array.isArray(res.props?.children)&&res.props.children.find(r=>Array.isArray(r));if(!v)return;const onPress=()=>{const content=generateSauceNAOLinks(attachments);g.findByProps("sendBotMessage").sendBotMessage(n.channel_id,{content});M.hideActionSheet();};v.push(t.React.createElement(P,{label:"SauceNAO Reverse Image Search",onPress}));});});}});}var plugin={onLoad:function(){this.unpatch=K();},onUnload:function(){this.unpatch&&this.unpatch();}};return f.default=plugin,Object.defineProperty(f,"__esModule",{value:!0}),f})({},vendetta.plugin,vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui,vendetta.ui.assets,vendetta.ui.components,vendetta.utils,vendetta,vendetta.commands,vendetta.ui.alerts,vendetta.storage,vendetta.ui.toasts);
