(function(f,$,g,t,B,C,d){"use strict";const H="https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=";async function translateText(text, targetLang="en"){try{const url=`${H}${targetLang}&dt=t&q=${encodeURIComponent(text)}`,response=await fetch(url);const result=await response.json();return result[0]?.[0]?.[0]||"Translation error"}catch(err){console.error("Google Translate fetch error:",err);return "Translation failed"}}function addTranslateOption(){const actionSheet=g.findByProps("openLazy","hideActionSheet");t.patcher.before("openLazy",actionSheet,([args, type])=>{if(type!=="MessageLongPressActionSheet")return;args[0].then(sheet=>{t.patcher.after("default",sheet,(props,res)=>{const message=props[0]?.message;if(!message?.content)return;res.props.children.push(d.React.createElement(d.Forms.FormRow,{label:"Translate Message",onPress:async()=>{const translated=await translateText(message.content);if(translated!=="Translation error"){t.FluxDispatcher.dispatch({type:"MESSAGE_UPDATE",message:{...message,content:translated}})}else{console.error("Translation failed")}}}))})})})}const commands=g.findByProps("registerCommand");function registerTranslateCommand(){commands.registerCommand({name:"translate",displayName:"translate",description:"Translate a message",type:1,inputType:0,options:[{name:"text",displayName:"text",type:3,required:!0},{name:"language",displayName:"language",type:3,required:!0}],async execute(args,ctx){const[text,lang]=args;try{const result=await translateText(text.value,lang.value);return{content:result}}catch(err){console.error("Translate command error:",err);return{content:"Translation failed"}}}})}f.onLoad=()=>{addTranslateOption();registerTranslateCommand()},f.onUnload=()=>{t.patcher.unpatchAll()}})({},vendetta.plugin,vendetta.metro,vendetta,vendetta.patcher,vendetta.ui,vendetta.ui.components);
