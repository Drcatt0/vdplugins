(function(p,r,s,e,u,E,D){"use strict";const PresenceStore=s.findByStoreName("PresenceStore"),SessionsStore=s.findByStoreName("SessionsStore"),UserStore=s.findByStoreName("UserStore"),{View:G}=e.ReactNative,{getAssetIDByName:H}=u,PlatformIcons={desktop:H("ic_monitor_24px"),web:H("ic_globe_24px"),mobile:H("ic_mobile_device")};function PlatformIndicator({userId:i}){const sessions=SessionsStore.getSessions(),userSessions=sessions[i]||[],platforms=Object.keys(userSessions).map(p=>p.client);return e.createElement(G,{style:{flexDirection:"row"}},platforms.map(platform=>e.createElement(e.Image,{key:platform,source:PlatformIcons[platform],style:{width:16,height:16,marginHorizontal:2}})))}const PlatformIndicatorComponent=({userId:i})=>e.createElement(PlatformIndicator,{userId:i}),patches=[];function applyPatchForComponent(ComponentName,selector){const Component=s.findByDisplayName(ComponentName);if(!Component)return;patches.push(r.after("render",Component,(props,ret)=>{const userId=selector(props);if(userId){const existing=e.findInReactTree(ret,c=>c.key==="PlatformIndicator");if(!existing){const container=e.findInReactTree(ret,c=>c?.props?.children);if(container)container.push(e.createElement(PlatformIndicatorComponent,{userId,key:"PlatformIndicator"}))}}}))}applyPatchForComponent("PrivateChannel","userId"),applyPatchForComponent("UserRow","user?.id"),applyPatchForComponent("ChannelMemberRow","user.id"),applyPatchForComponent("ChannelHeader","props.userId");p.default={onLoad:()=>{},onUnload:()=>{patches.forEach(unpatch=>unpatch())}}})(typeof exports==="undefined"?{}:exports,vendetta.patcher,vendetta.metro,vendetta.ui,vendetta.ui.assets,vendetta.ui.components,vendetta.storage);
