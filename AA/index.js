(function(S,f,d,L,l,t,a,E,g,r,N){"use strict";const{View:U,Image:F,Pressable:se}=a.ReactNative,{getAssetIDByName:H}=E,PlatformIcons={desktop:H("ic_monitor_24px"),web:H("ic_globe_24px"),mobile:H("ic_mobile_device"),embedded:H("ic_monitor_24px")};function PlatformIndicator({platform:c,color:h}){const iconSource=PlatformIcons[c]||PlatformIcons.desktop;return l.createElement(U,{style:{flexDirection:"row"}},l.createElement(F,{style:{width:16,height:16,tintColor:h},source:iconSource}))}function UserPlatformIndicators({userId:i}){const SessionsStore=d.findByStoreName("SessionsStore"),sessionData=SessionsStore.getSessions()[i];if(!sessionData)return null;const platformStatuses=Object.keys(sessionData.clientInfo||{});return l.createElement(U,{style:{flexDirection:"row"}},platformStatuses.map(c=>l.createElement(PlatformIndicator,{platform:c,color:"#80848e"})))}let patches=[];function applyPatches(){const ChannelHeader=d.findByName("ChannelHeader",!1);patches.push(f.after("render",ChannelHeader,(args,res)=>{const userId=args[0]?.props?.userId;if(userId){const platformIconsContainer=l.findInReactTree(res,c=>c.key==="PlatformIndicators");platformIconsContainer||res.props.children.push(l.createElement(UserPlatformIndicators,{userId,key:"PlatformIndicators"}))}}))}const plugin={onLoad:()=>{applyPatches()},onUnload:()=>{patches.forEach(unpatch=>unpatch())},settings:()=>l.createElement(a.ReactNative.ScrollView,null,l.createElement(U,{style:{padding:10}},l.createElement(L.Forms.FormSwitchRow,{label:"Show platform icons in DMs",value:r.storage.dmTopBar??!0,onValueChange:val=>{r.storage.dmTopBar=val}}),l.createElement(L.Forms.FormSwitchRow,{label:"Show platform icons in user lists",value:r.storage.userList??!0,onValueChange:val=>{r.storage.userList=val}})))};S.default=plugin,Object.defineProperty(S,"__esModule",{value:!0})})(typeof exports==="undefined"?{}:exports,vendetta.patcher,vendetta.metro,vendetta.ui.components,vendetta.utils,window.React,vendetta.metro.common,vendetta.ui.assets,vendetta.ui,vendetta.plugin,vendetta.storage);
