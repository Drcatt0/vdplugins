(function(p,r,s,e){"use strict";const{getGuildFolders:g}=s.findByStoreName("UserSettingsProtoStore"),{isFolderExpanded:L}=s.findByStoreName("ExpandedGuildFolderStore"),toggleAutoCollapse=()=>{const expandedFolders=g().filter(t=>t.folderId&&L(t.folderId));if(expandedFolders.length>1){expandedFolders.slice(1).forEach(t=>{e.FluxDispatcher.dispatch({type:"TOGGLE_GUILD_FOLDER_EXPAND",folderId:t.folderId})})}};const FolderAutoCollapse=()=>{const onFolderToggle=a=>{let{folderId:id}=a;if(r.storage.autoCollapse&&L(id)){toggleAutoCollapse()}};e.FluxDispatcher.subscribe("TOGGLE_GUILD_FOLDER_EXPAND",onFolderToggle);return()=>e.FluxDispatcher.unsubscribe("TOGGLE_GUILD_FOLDER_EXPAND",onFolderToggle)};var j={onLoad:function(){r.storage.autoCollapse??=true;this.unsubFolderToggle=FolderAutoCollapse();setTimeout(toggleAutoCollapse,100)},onUnload:function(){this.unsubFolderToggle&&this.unsubFolderToggle();setTimeout(toggleAutoCollapse,100)}};return p.default=j,Object.defineProperty(p,"__esModule",{value:!0}),p})({},vendetta.plugin,vendetta.metro,vendetta.metro.common);
