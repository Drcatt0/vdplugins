(function(p,r,s,e){"use strict";const{getGuildFolders:g}=s.findByStoreName("UserSettingsProtoStore"),{isFolderExpanded:L}=s.findByStoreName("ExpandedGuildFolderStore");let debounceTimer=null;const toggleAutoCollapse=()=>{const currentExpanded=g().filter(t=>t.folderId&&L(t.folderId));if(currentExpanded.length>1){currentExpanded.slice(1).forEach(t=>{e.FluxDispatcher.dispatch({type:"TOGGLE_GUILD_FOLDER_EXPAND",folderId:t.folderId})})}};const FolderAutoCollapse=()=>{const onFolderToggle=a=>{clearTimeout(debounceTimer);debounceTimer=setTimeout(()=>{const{folderId:id}=a;if(r.storage.autoCollapse&&L(id)){toggleAutoCollapse()}},100)};e.FluxDispatcher.subscribe("TOGGLE_GUILD_FOLDER_EXPAND",onFolderToggle);return()=>{clearTimeout(debounceTimer);e.FluxDispatcher.unsubscribe("TOGGLE_GUILD_FOLDER_EXPAND",onFolderToggle)}};var j={onLoad:function(){r.storage.autoCollapse??=true;this.unsubFolderToggle=FolderAutoCollapse()},onUnload:function(){this.unsubFolderToggle&&this.unsubFolderToggle()}};return p.default=j,Object.defineProperty(p,"__esModule",{value:!0}),p})({},vendetta.plugin,vendetta.metro,vendetta.metro.common);
